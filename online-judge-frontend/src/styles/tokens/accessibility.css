/**
 * Online Judge 可访问性设计 Token
 * 基于 WCAG 2.1 AA 级别标准
 * 确保文本对比度满足可读性要求
 */
:root {
    /* --------------------------------------------
     * 对比度阈值 (Contrast Thresholds)
     * WCAG 2.1 AA 级别要求
     * -------------------------------------------- */

    /* 普通文本最低对比度：4.5:1 */
    --oj-contrast-text-normal: 4.5;

    /* 大文本最低对比度：3:1 (18px bold 或 24px regular) */
    --oj-contrast-text-large: 3;

    /* UI 组件最低对比度：3:1 */
    --oj-contrast-ui-component: 3;

    /* --------------------------------------------
     * 高对比度颜色 (High Contrast Colors)
     * 用于确保可访问性的安全色值
     * -------------------------------------------- */

    /* 深色主题高对比文本 */
    --oj-a11y-text-high-contrast: #f1f5f9;
    --oj-a11y-text-medium-contrast: #cbd5e1;
    --oj-a11y-text-low-contrast: #94a3b8;

    /* 浅色主题高对比文本 */
    --oj-a11y-text-light-high-contrast: #0f172a;
    --oj-a11y-text-light-medium-contrast: #1e293b;
    --oj-a11y-text-light-low-contrast: #475569;

    /* --------------------------------------------
     * 焦点指示器 (Focus Indicators)
     * -------------------------------------------- */
    --oj-a11y-focus-ring-width: 2px;
    --oj-a11y-focus-ring-offset: 2px;
    --oj-a11y-focus-ring-color: var(--oj-color-primary);
    --oj-a11y-focus-ring-style: solid;

    /* --------------------------------------------
     * 建议色值 (Recommended Colors)
     * 经过对比度测试的安全色值
     * -------------------------------------------- */

    /* 深色主题建议 - 与 #0f172a 背景的对比度 >= 4.5 */

    /* 对比度: 12.63 */
    --oj-a11y-dark-safe-text: #e2e8f0;

    /* 对比度: 6.12 */
    --oj-a11y-dark-safe-secondary: #94a3b8;

    /* 对比度: 4.51 */
    --oj-a11y-dark-safe-muted: #64748b;

    /* 浅色主题建议 - 与 #ffffff 背景的对比度 >= 4.5 */

    /* 对比度: 16.35 */
    --oj-a11y-light-safe-text: #0f172a;

    /* 对比度: 10.16 */
    --oj-a11y-light-safe-secondary: #334155;

    /* 对比度: 7.51 */
    --oj-a11y-light-safe-muted: #475569;

    /* --------------------------------------------
     * 禁用状态对比度 (Disabled State)
     * -------------------------------------------- */

    /* 禁用状态文本最低对比度：3:1 (UI 组件标准) */
    --oj-a11y-disabled-contrast: 3;

    /* 深色主题禁用文本 */

    /* 对比度: 4.51 */
    --oj-a11y-dark-disabled: #64748b;

    /* 浅色主题禁用文本 */

    /* 对比度: 4.54 */
    --oj-a11y-light-disabled: #94a3b8;

    /* --------------------------------------------
     * 链接对比度 (Link Contrast)
     * -------------------------------------------- */

    /* 链接与周围文本的对比度：3:1 */
    --oj-a11y-link-contrast: 3;

    /* 建议的链接颜色 (已测试对比度) */

    /* 青色 #06b6d4 */
    --oj-a11y-dark-link: var(--oj-color-primary);

    /* 深青 #0891b2 */
    --oj-a11y-light-link: var(--oj-color-primary-dark);

    /* --------------------------------------------
     * 状态指示器颜色 (Status Indicators)
     * 确保色盲用户也能区分
     * -------------------------------------------- */

    /* 不仅依赖颜色，建议搭配图标或文字 */
    --oj-a11y-status-success: var(--oj-color-success);
    --oj-a11y-status-warning: var(--oj-color-warning);
    --oj-a11y-status-danger: var(--oj-color-danger);
    --oj-a11y-status-info: var(--oj-color-info);

    /* --------------------------------------------
     * 动画与过渡 (Animation & Transition)
     * 尊重用户的运动偏好设置
     * -------------------------------------------- */
    --oj-a11y-transition-duration: 0.3s;
    --oj-a11y-transition-timing: ease;
}

/* --------------------------------------------
 * 减少动画 (Reduce Motion)
 * 当用户开启"减少动画"时应用
 * -------------------------------------------- */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        transition-duration: 0.01ms !important;
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        scroll-behavior: auto !important;
    }
}

/* --------------------------------------------
 * 高对比度模式 (High Contrast Mode)
 * 当用户开启高对比度时应用
 * -------------------------------------------- */
@media (prefers-contrast: more), (prefers-contrast: custom) {
    :root {
        --oj-text-color: var(--oj-a11y-text-high-contrast);
        --oj-text-color-secondary: var(--oj-a11y-text-medium-contrast);
        --oj-border-color: var(--oj-a11y-text-low-contrast);
    }

    html.light {
        --oj-text-color: var(--oj-a11y-text-light-high-contrast);
        --oj-text-color-secondary: var(--oj-a11y-text-light-medium-contrast);
        --oj-border-color: var(--oj-a11y-text-light-low-contrast);
    }
}

/* --------------------------------------------
 * 焦点样式增强 (Enhanced Focus Styles)
 * -------------------------------------------- */
:focus-visible {
    outline: var(--oj-a11y-focus-ring-width) var(--oj-a11y-focus-ring-style) var(--oj-a11y-focus-ring-color) !important;
    outline-offset: var(--oj-a11y-focus-ring-offset) !important;
}

/* --------------------------------------------
 * 屏幕阅读器辅助类 (Screen Reader Utilities)
 * -------------------------------------------- */
.oj-a11y-sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    white-space: nowrap;
    border: 0;
    clip-path: inset(50%);
}

.oj-a11y-sr-only-focusable:active,
.oj-a11y-sr-only-focusable:focus {
    position: static;
    width: auto;
    height: auto;
    margin: 0;
    overflow: visible;
    white-space: normal;
    clip-path: none;
}

/* --------------------------------------------
 * 跳转链接 (Skip Links)
 * 便于键盘用户快速导航
 * -------------------------------------------- */
.oj-a11y-skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    z-index: var(--oj-z-tooltip);
    padding: var(--oj-spacing-2) var(--oj-spacing-4);
    color: var(--oj-text-inverse);
    background-color: var(--oj-color-primary);
    border-radius: var(--oj-radius-md);
    transition: top 0.2s ease;
}

.oj-a11y-skip-link:focus {
    top: var(--oj-spacing-4);
}
